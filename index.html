<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tess Miller ðŸ’˜ Valentine</title>

<style>
:root{--pink:#db2777;--shadow:0 18px 45px rgba(0,0,0,.14);}
body{
  margin:0;height:100vh;display:grid;place-items:center;
  font-family:system-ui,Segoe UI,Arial;
  background:radial-gradient(circle at 30% 20%,#fff0f6,#f3f8ff,#fff);
  overflow:hidden;
}
.card{
  background:#fff;padding:48px 42px;border-radius:22px;
  box-shadow:var(--shadow);width:min(900px,94vw);text-align:center;
}
h1{font-size:32px;margin:0 0 12px;}
p{color:#444;margin:0 0 18px;}

.btns{position:relative;height:200px;display:flex;gap:18px;justify-content:center;align-items:center;}
button{
  border:0;padding:12px 18px;border-radius:12px;
  font-size:16px;font-weight:800;cursor:pointer;
  box-shadow:0 10px 20px rgba(0,0,0,.1);
  transition:opacity .2s ease;
}
#yes{background:#22c55e;color:#fff;min-width:130px;}
#no{background:#ef4444;color:#fff;position:absolute;}

.msg{margin-top:16px;font-weight:900;color:var(--pink);min-height:28px;}
.heartWrap{display:none;justify-content:center;gap:8px;margin-top:12px;}
.heart{width:26px;height:26px;background:var(--pink);transform:rotate(45deg);animation:beat 1s infinite;position:relative;border-radius:6px;}
.heart:before,.heart:after{content:"";width:26px;height:26px;background:var(--pink);border-radius:50%;position:absolute;}
.heart:before{left:-13px;}
.heart:after{top:-13px;}
@keyframes beat{50%{transform:rotate(45deg) scale(1.25);}}

.afterYesBtns{display:none;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:14px;}
.afterYesBtns button{min-width:300px;}
#instructionsBtn{background:#111827;color:#fff;}
#cancelBtn{background:#f97316;color:#fff;}
#cancelBtn span{display:block;font-size:13px;margin-top:6px;opacity:.95;font-weight:650;}

.panel{
  display:none;margin:18px auto 0;max-width:720px;
  background:#fff;border:1px solid #ffd0e6;border-radius:16px;
  padding:16px;text-align:left;
}

.oneOption{
  display:none;
  margin-top:14px;
  font-weight:900;
  font-size:18px;
  color:#111827;
}

.final{display:none;font-weight:900;font-size:18px;margin-top:16px;color:#111827;}
.reload{
  display:none;
  font-size:20px;font-weight:900;color:#111827;
  background:#fff;padding:16px 18px;border-radius:18px;
  box-shadow:var(--shadow);text-align:center;width:min(740px,92vw);
}

.pop{position:fixed;font-size:26px;animation:pop .7s forwards;pointer-events:none;filter:drop-shadow(0 10px 14px rgba(0,0,0,.18));}
@keyframes pop{to{transform:translate(var(--dx),var(--dy)) scale(1.3);opacity:0;}}
.hidden{display:none!important;}
</style>
</head>

<body>

<div class="card" id="card">
  <h1>Tess Miller (a.k.a. mi guapa), would you be my Valentine? ðŸ’˜</h1>
  <p>FYI there is only one right answer ðŸ‘€ðŸ’–</p>

  <div class="btns" id="arena">
    <button id="yes">Yes ðŸ’–</button>
    <button id="no">No ðŸ™ƒ</button>
  </div>

  <div class="msg" id="msg"></div>

  <div class="heartWrap" id="hearts">
    <div class="heart"></div><div class="heart"></div><div class="heart"></div>
  </div>

  <div class="afterYesBtns" id="afterYes">
    <button id="instructionsBtn">Click here for instructions</button>
    <button id="cancelBtn">CANCEL INVITE<span>(do not press)</span></button>
  </div>

  <div class="oneOption" id="oneOption">
    Well, thereâ€™s only one option nowâ€¦ RUDE ðŸ™„
  </div>

  <div class="panel" id="instructions">
    <p>
      You are cordially invited to your first Valentineâ€™s Day with your sexy Spaniard
      on February 14 at 7:00 PM, at 903 LAKE LILY DR APT A410,
      Quadrant A3 (the kitchen bar).
      <br><br>See ya soon, ti adoro ðŸ’–
    </p>
    <div class="heartWrap" style="display:flex;margin-top:10px;">
      <div class="heart"></div>
    </div>
  </div>

  <div class="final" id="final"></div>
</div>

<div class="reload" id="reload">
  Reload the website to see this message again ðŸ˜˜
</div>

<script>
const arena=document.getElementById("arena");
const noBtn=document.getElementById("no");
const yesBtn=document.getElementById("yes");
const cancelBtn=document.getElementById("cancelBtn");
const instructionsBtn=document.getElementById("instructionsBtn");
const instructions=document.getElementById("instructions");
const hearts=document.getElementById("hearts");
const afterYes=document.getElementById("afterYes");
const msg=document.getElementById("msg");
const card=document.getElementById("card");
const final=document.getElementById("final");
const reload=document.getElementById("reload");
const oneOption=document.getElementById("oneOption");

let stage=0;

// flags
let cancelFinished=false;
let finalStarted=false;

function move(btn){
  const r=arena.getBoundingClientRect(),b=btn.getBoundingClientRect();
  btn.style.position="absolute";
  btn.style.left=Math.random()*(r.width-b.width)+"px";
  btn.style.top=Math.random()*(r.height-b.height)+"px";
}
function evade(btn){
  if(btn.dataset.evade)return;
  document.addEventListener("mousemove",e=>{
    const r=btn.getBoundingClientRect();
    const d=Math.hypot(
      e.clientX-(r.left+r.width/2),
      e.clientY-(r.top+r.height/2)
    );
    if(d<140) move(btn);
  });
  btn.addEventListener("touchstart",(e)=>{e.preventDefault();move(btn);},{passive:false});
  btn.dataset.evade=1;
}
evade(noBtn);
window.addEventListener("load",()=>move(noBtn));

function explode(count=30){
  const emojis=["ðŸ’¥","âœ¨","ðŸ’–","ðŸ”¥","ðŸ’£","ðŸ’«","ðŸ’˜"];
  for(let i=0;i<count;i++){
    const e=document.createElement("div");
    e.className="pop";
    e.textContent=emojis[Math.floor(Math.random()*emojis.length)];
    e.style.left="50%";
    e.style.top="50%";
    e.style.setProperty("--dx",(Math.random()*520-260)+"px");
    e.style.setProperty("--dy",(Math.random()*420-210)+"px");
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),700);
  }
}

function startFinalCountdown(){
  if(finalStarted) return;
  finalStarted=true;

  let n=10;
  final.style.display="block";

  const tick=()=>{
    final.textContent=`This message will self-destruct in ${n} secondsâ€¦ I love you, bye ðŸ’–`;
    n--;
    if(n<0){
      explode(42);
      card.remove();
      reload.style.display="block";
      clearInterval(t);
    }
  };
  tick();
  const t=setInterval(tick,1000);
}

function scheduleFinalAfter5s(){
  // espera 5s antes de arrancar el countdown final
  setTimeout(() => {
    startFinalCountdown();
  }, 5000);
}

yesBtn.onclick=()=>{
  msg.textContent="Yeeiii ðŸ’– thatâ€™s the right answer! ðŸ˜";
  hearts.style.display="flex";
  afterYes.style.display="flex";
  noBtn.classList.add("hidden");
};

instructionsBtn.onclick=()=>{
  instructions.style.display="block";
  instructions.scrollIntoView({behavior:"smooth",block:"center"});

  // SOLO si ya pasÃ³ el camino de cancel hasta explotar:
  if(cancelFinished){
    oneOption.style.display="none";     // desaparece RUDE
    scheduleFinalAfter5s();            // 5s despuÃ©s empieza el final
  }
};

function selfDestructCancelButton(){
  let n=5;
  const t=setInterval(()=>{
    cancelBtn.innerHTML=`This cancel option will self-destruct in ${n}â€¦`;
    n--;
    if(n<0){
      clearInterval(t);
      explode(22);
      cancelBtn.remove();
      cancelFinished=true;

      // aparece el letrero RUDE (solo queda instructions)
      oneOption.style.display="block";
      oneOption.scrollIntoView({behavior:"smooth",block:"center"});
    }
  },1000);
}

cancelBtn.onclick=()=>{
  if(stage===0){
    stage=1;
    cancelBtn.textContent="Moriah Tess Miller â€” Donâ€™t you dare to click here again!!";
    cancelBtn.style.background="#fb7185";
    return;
  }
  if(stage===1){
    stage=2;
    cancelBtn.textContent="REALLY?!?! ðŸ˜­";
    cancelBtn.style.background="#ef4444";
    return;
  }
  if(stage===2){
    stage=3;
    cancelBtn.innerHTML="Click to cancel<br><span>(if you can)</span>";
    cancelBtn.style.background="#7c3aed";

    evade(cancelBtn);
    move(cancelBtn);

    // 5s despuÃ©s empieza self-destruct del botÃ³n
    setTimeout(selfDestructCancelButton,5000);
  }
};
</script>

</body>
</html>
